{% extends 'base.html' %}

{% load sekizai_tags %}
{% load customtags %}
{% load static %}

{% block head %}
{% include 'head_content.html' with title="LyProX Â· Compute Personalized Risk" %}
{% endblock head %}

{% block "css" %}
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
{% endblock "css" %}

{% block "js" %}
<script src="https://cdn.jsdelivr.net/npm/bulma-slider@2.0.5/dist/js/bulma-slider.min.js"></script>
<script src="https://unpkg.com/prettier@2.8.7/standalone.js"></script>
<script src="https://unpkg.com/prettier@2.8.7/parser-yaml.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script src="{% static 'dataexplorer/dashboard.js' %}"></script>
<script src="{% static 'riskpredictor/yaml_formatter.js' %}"></script>
<link rel="stylesheet" href="{% static 'dashboard.css' %}">
{% endblock "js" %}

{% block content %}
<!--
  The CSRF token is not necessary for the GET request by this form, but for the AJAX request.
  Also, it is outside the form such that it doesn't get sent via the keyboard shortcut GET request.
-->
{% csrf_token %}
<form action="{% url 'riskpredictor:dashboard' checkpoint_pk=checkpoint.pk %}" method="GET" id="dashboard-form" name="dashboardform">
  <section class="section">
    <div class="fixed-grid has-4-cols">
      <div class="grid">
        <div class="grid is-height-100">
          <div class="cell is-col-span-1">
            <div class="fixed-grid has-1-cols is-height-100">
              <div class="grid is-height-100">
                <div class="cell is-col-span-1">
                  {% include 'riskpredictor/boxes/tumor.html' with form=form is_midline=checkpoint.is_midline %}
                </div>
                <div class="cell is-col-span-1">
                  {% include 'riskpredictor/boxes/spec_sens.html' %}
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="cell is-col-span-3">
          <div class="fixed-grid is-height-100 has-2-cols">
            <div class="grid is-height-100">
              <div class="cell">
                {% if not checkpoint.is_unilateral %}
                {% include 'riskpredictor/boxes/risk.html' with form=form side='contra' %}
                {% endif %}
              </div>
              <div class="cell">
                {% include 'riskpredictor/boxes/risk.html' with form=form side='ipsi' risks=risks %}
              </div>
              <div class="cell is-col-span-2">
                {% include 'riskpredictor/boxes/controls.html' %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</form>
{% endblock content %}
