{% extends 'base.html' %}

{% load sekizai_tags %}
{% load customtags %}
{% load static %}

{% block head %}
{% include 'head_content.html' with title='LyProX Â· Data Explorer' %}
{% endblock head %}

{% block "css" %}
<link rel="stylesheet" href="{% static 'dataexplorer/dashboard.css' %}">
{% endblock %}

{% block "js" %}
<script src="{% static 'dataexplorer/dashboard.js' %}"></script>
{% endblock %}

{% block content %}
<!--
    The CSRF token is not necessary for the GET request by this form, but for the AJAX request.
    Also, it is outside the form such that it doesn't get sent via the keyboard shortcut GET request.
  -->
{% csrf_token %}
<form method="GET" action="{% url 'dataexplorer:dashboard' %}" id="dashboard-form" name="dashboardform">
  <section class="section">
    <div class="fixed-grid has-4-cols">
      <div class="grid">
        <div class="cell is-col-span-1">
          {% include 'dataexplorer/filter/tumor.html' with form=form %}
        </div>
        <div class="cell is-col-span-3">
          <div class="fixed-grid has-2-cols">
            <div class="grid">
              <div class="cell">
                {% include 'dataexplorer/filter/patient.html' with form=form %}
              </div>
              <div class="cell">
                {% include 'dataexplorer/filter/datasets.html' with form=form %}
              </div>
              <div class="cell is-col-span-2">
                {% include 'dataexplorer/filter/modalities.html' with form=form %}
              </div>
              <div class="cell">
                {% include 'dataexplorer/involvement.html' with form=form side='contra' %}
              </div>
              <div class="cell">
                {% include 'dataexplorer/involvement.html' with form=form side='ipsi' %}
              </div>
              <div class="cell is-col-span-2">
                {% include 'dataexplorer/controls.html' with form=form %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    {% comment %} <div class="grid">
      <div class="tile is-3 is-vertical is-parent">
        <!-- Primary tumor -->
        {% include 'dataexplorer/filter/tumor.html' with form=form %}
      </div>

      <div class="tile is-9 is-vertical">
        <div class="tile">
          <div class="tile is-parent">
            <!-- Patient details -->
            {% include 'dataexplorer/filter/patient.html' with form=form %}
          </div>
          <div class="tile is-parent">
            <!-- Datasets -->
            {% include 'dataexplorer/filter/datasets.html' with form=form %}
          </div>
        </div>
        <div class="tile is-parent is-vertical">

          <!-- Modalities -->
          {% include 'dataexplorer/filter/modalities.html' with form=form %}
        </div>

        <!-- Involvement prevalence -->
        <div class="tile">
          <!-- contralateral -->
          {% include 'dataexplorer/involvement.html' with form=form side='contra' %}

          <!-- ipsilateral -->
          {% include 'dataexplorer/involvement.html' with form=form side='ipsi' %}
        </div>

        <!-- Controls -->
        {% include 'dataexplorer/controls.html' with form=form %}
      </div>
    </div> {% endcomment %}
  </section>
</form>
{% endblock %}
