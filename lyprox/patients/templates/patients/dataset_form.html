{% extends "base.html" %}
{% load static %}

{% block head %}
{% include 'head_content.html' with title="LyProX Â· Upload Dataset" %}
{% endblock head %}

{% block content %}

<section class="section">
  <div class="container">
    <div class="block columns is-centered">
      <div class="column is-6">
        <div class="box">
          <form action="{% url 'patients:dataset_upload' %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="block">
              <p class="title is-3">Upload Dataset</p>
              <p>
                Upload a CSV file and fill in some basic metadata. If
                the dataset can be found in an open repository, feel
                free to add the link to it as well.
              </p>
              {% if form.non_field_errors %}
              <p class="notification is-danger is-light">
                {{ form.non_field_errors }}
              </p>
              {% endif %}

              {% if error %}
              <p class="notification is-danger is-light">
                {{ error }}
              </p>
              {% endif %}
            </div>
            <div class="block">
              <div class="field">
                <div class="control is-expanded">
                  <label for="{{ form.git_repo_url.id_for_label }}" class="label">
                    {{ form.git_repo_url.label }}
                  </label>
                  {{ form.git_repo_url }}
                  {% if form.errors.git_repo_url %}
                  <small class="help is-danger">{{ form.errors.git_repo_url }}</small>
                  {% endif %}
                </div>
              </div>
            </div>
            <div class="field is-grouped">
              <div class="control">
                <label for="{{ form.revision.id_for_label }}" class="label">
                  {{ form.revision.label }}
                </label>
                {{ form.revision }}
                {% if form.errors.revision %}
                <small class="help is-danger">{{ form.errors.revision }}</small>
                {% endif %}
              </div>
              <div class="control is-expanded">
                <label for="{{ form.data_path.id_for_label }}" class="label">
                  {{ form.data_path.label }}
                </label>
                {{ form.data_path }}
                {% if form.errors.data_path %}
                <small class="help is-danger">{{ form.errors.data_path }}</small>
                {% endif %}
              </div>
            </div>
            <div class="block">
              <div class="field">
                <button class="button is-primary" type="submit">
                  <span class="icon">
                    <i class="fas fa-cloud-upload-alt"></i>
                  </span>
                  <span>Upload</span>
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

{% block "js" %}
<script src="{% static 'patients/dataset_form.js' %}"></script>
{% endblock "js" %}

{% endblock content %}
